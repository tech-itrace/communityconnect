openapi: 3.0.3
info:
  title: Community Connect API
  version: 2.0.0
  description: |
    API for Community Connect - A comprehensive member management and search system for business communities.
    
    Features:
    - Natural language search with conversation context to find business professionals
    - Semantic and keyword-based member search for networking opportunities
    - Member management and business statistics
    - Authentication via phone number for secure access
    
    The API supports three main categories:
    1. **Bot/Messages**: Simple LLM-powered business query assistance
    2. **Search**: Natural language and structured search capabilities for finding members with specific skills, services, or business profiles
    3. **Members**: Member retrieval, listing, and community statistics
    
    Perfect for business communities, alumni networks, professional associations, and entrepreneur groups
    looking to leverage their network for business growth, partnerships, and collaborations.
  contact:
    name: API Support
    email: support@communityconnect.com
servers:
  - url: http://localhost:3000/api
    description: Development server
  - url: https://api.communityconnect.com/api
    description: Production server

paths:
  # ============================================================================
  # Health Check
  # ============================================================================
  /health:
    get:
      summary: Health check endpoint
      description: Check if the API is running and responsive
      tags:
        - System
      responses:
        '200':
          description: API is healthy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthResponse'
              example:
                status: "ok"
                timestamp: "2025-10-21T10:30:00.000Z"

  # ============================================================================
  # Bot/Messages Endpoints
  # ============================================================================
  /messages:
    post:
      summary: Send a message to the bot
      description: Send a message to the LLM-powered bot and receive a response about community members, business services, or networking opportunities
      tags:
        - Bot
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MessageRequest'
            example:
              message: "Tell me about members offering cloud consulting services in Mumbai"
      responses:
        '200':
          description: Bot response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MessageResponse'
              example:
                response: "I found several members offering cloud consulting services in Mumbai. They specialize in AWS, Azure, and Google Cloud solutions with expertise in cloud migration, DevOps, and infrastructure management."
        '400':
          description: Bad request (missing message)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                error: "Message is required"
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # ============================================================================
  # Search Endpoints
  # ============================================================================
  /search/query:
    post:
      summary: Process natural language search query
      description: |
        Process a natural language query to search for community members based on business needs.
        Requires phone number authentication. Maintains conversation context for follow-up queries.
        
        Use cases:
        - Find members with specific technical skills for collaboration
        - Discover potential business partners in specific locations
        - Identify service providers within the community
        - Connect with members based on business turnover or industry experience
      tags:
        - Search
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NLSearchRequest'
            example:
              phoneNumber: "+919876543210"
              query: "Find members who do consulting in Bangalore with high turnover"
              options:
                maxResults: 10
                includeResponse: true
                includeSuggestions: true
      responses:
        '200':
          description: Search results with natural language understanding
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NLSearchResponse'
        '400':
          description: Invalid request parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponse'
              examples:
                missingPhone:
                  summary: Missing phone number
                  value:
                    success: false
                    error:
                      code: "PHONE_NUMBER_REQUIRED"
                      message: "Phone number is required for authentication"
                      details:
                        phoneNumber: null
                invalidQuery:
                  summary: Invalid query
                  value:
                    success: false
                    error:
                      code: "INVALID_QUERY"
                      message: "Query is required and must be a non-empty string"
                queryTooLong:
                  summary: Query too long
                  value:
                    success: false
                    error:
                      code: "QUERY_TOO_LONG"
                      message: "Query must be less than 500 characters"
                      details:
                        length: 550
                        maxLength: 500
        '403':
          description: Unauthorized - phone number not found or member inactive
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponse'
              example:
                success: false
                error:
                  code: "UNAUTHORIZED"
                  message: "Access denied. This service is only available to active community members."
                  details:
                    reason: "Phone number not found in community members database or member is inactive"
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponse'

  /search/members:
    post:
      summary: Search for members (structured search)
      description: |
        Search for community members using structured filters and search parameters.
        Supports hybrid, semantic, and keyword search types.
        
        Ideal for:
        - Finding members with specific skill sets for projects
        - Discovering service providers within your budget range
        - Connecting with alumni from specific graduation years
        - Identifying potential business partners by location and expertise
      tags:
        - Search
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SearchMembersRequest'
            example:
              query: "software developer with cloud experience"
              searchType: "hybrid"
              filters:
                city: "Bangalore"
                minTurnover: 5000000
                skills: ["Python", "AWS", "Docker"]
                services: ["Software Development", "Cloud Consulting"]
              page: 1
              limit: 10
              sortBy: "relevance"
              sortOrder: "desc"
      responses:
        '200':
          description: Search results
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SearchResponse'
        '400':
          description: Invalid search parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponse'
        '500':
          description: Search error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponse'

  /search/suggestions:
    get:
      summary: Get autocomplete suggestions
      description: |
        Get autocomplete suggestions for cities, skills, and services available within the community.
        Can filter by type or return all types.
        
        Useful for:
        - Discovering what skills are available in the network
        - Finding service categories offered by members
        - Exploring geographic distribution of the community
      tags:
        - Search
      parameters:
        - name: type
          in: query
          description: Type of suggestions to retrieve
          required: false
          schema:
            type: string
            enum: [cities, skills, services]
          example: skills
      responses:
        '200':
          description: Suggestions retrieved successfully
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/SuggestionsResponse'
                  - $ref: '#/components/schemas/AllSuggestionsResponse'
              examples:
                typedSuggestions:
                  summary: Suggestions for a specific type
                  value:
                    success: true
                    type: "skills"
                    suggestions: ["Python", "JavaScript", "React", "Node.js", "AI/ML"]
                allSuggestions:
                  summary: All suggestion types
                  value:
                    success: true
                    suggestions:
                      cities: ["Chennai", "Bangalore", "Mumbai", "Delhi", "Hyderabad", "Pune"]
                      skills: ["Python", "JavaScript", "React", "Node.js", "Java", "AWS"]
                      services: ["Software Development", "Consulting", "IT Services", "Training", "Cloud Solutions"]
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponse'

  # ============================================================================
  # WhatsApp Integration
  # ============================================================================
  /whatsapp/webhook:
    get:
      summary: WhatsApp webhook verification
      description: Webhook verification endpoint required by Twilio/WhatsApp for business messaging integration
      tags:
        - WhatsApp
      responses:
        '200':
          description: Webhook is active
          content:
            text/plain:
              schema:
                type: string
                example: "Webhook is active"
    
    post:
      summary: WhatsApp message handler
      description: |
        Handles incoming WhatsApp messages from Twilio for business community members.
        Processes natural language queries and returns formatted responses with member search results.
        
        Members can:
        - Search for business partners via WhatsApp
        - Find service providers in the community
        - Discover members with specific skills
        - Get quick access to networking opportunities
      tags:
        - WhatsApp
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/WhatsAppWebhookRequest'
            example:
              From: "whatsapp:+919876543210"
              Body: "Find software developers in Chennai for a new project"
              ProfileName: "Rajesh Kumar"
              MessageSid: "SM1234567890abcdef"
              AccountSid: "AC1234567890abcdef"
      responses:
        '200':
          description: Message processed successfully
          content:
            text/plain:
              schema:
                type: string
                example: |
                  üîç *I found 3 software developers in Chennai with relevant experience. Here are the top matches:*
                  
                  Found 3 members:
                  
                  1. *Arun Sharma*
                     üìç Chennai
                     üíº Senior Software Engineer
                     üè¢ TechVision Solutions
                  
                  2. *Priya Menon*
                     üìç Chennai
                     üíº Full Stack Developer
                     üè¢ Digital Innovations Pvt Ltd
                  
                  3. *Karthik Reddy*
                     üìç Chennai
                     üíº Lead Developer
                     üè¢ CodeCraft Technologies
                  
                  üí° *Try asking:*
                  - Filter by specific technology stack
                  - Find developers with startup experience

  # ============================================================================
  # Members Endpoints
  # ============================================================================
  /members:
    get:
      summary: List all members with pagination
      description: |
        Retrieve a paginated list of all community members.
        Supports filtering by city, degree, year and sorting options.
        
        Perfect for:
        - Browsing the community directory
        - Filtering members by location for local meetups
        - Finding alumni from specific years or programs
        - Exploring member profiles for networking opportunities
      tags:
        - Members
      parameters:
        - name: page
          in: query
          description: Page number (starts from 1)
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
          example: 1
        - name: limit
          in: query
          description: Number of results per page
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
          example: 10
        - name: sortBy
          in: query
          description: Field to sort by
          required: false
          schema:
            type: string
            enum: [name, turnover, year]
            default: name
          example: name
        - name: sortOrder
          in: query
          description: Sort order
          required: false
          schema:
            type: string
            enum: [asc, desc]
            default: asc
          example: asc
        - name: city
          in: query
          description: Filter by city
          required: false
          schema:
            type: string
          example: Chennai
        - name: degree
          in: query
          description: Filter by degree
          required: false
          schema:
            type: string
          example: "B.E."
        - name: year
          in: query
          description: Filter by year of graduation
          required: false
          schema:
            type: integer
          example: 2015
      responses:
        '200':
          description: List of members
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedMembersResponse'
        '400':
          description: Invalid parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponse'

  /members/{id}:
    get:
      summary: Get a single member by ID
      description: |
        Retrieve detailed information about a specific member including their business profile,
        skills, services offered, and contact information.
        
        Use this to:
        - View complete member business profile
        - Get contact details for networking
        - Check member's expertise and service offerings
        - Review business turnover and company information
      tags:
        - Members
      parameters:
        - name: id
          in: path
          required: true
          description: Member UUID
          schema:
            type: string
            format: uuid
          example: "123e4567-e89b-12d3-a456-426614174000"
      responses:
        '200':
          description: Member details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MemberResponse'
        '400':
          description: Invalid ID format
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponse'
              example:
                success: false
                error:
                  code: "INVALID_ID"
                  message: "Invalid member ID format"
                  details: "Member ID must be a valid UUID"
        '404':
          description: Member not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponse'
              example:
                success: false
                error:
                  code: "NOT_FOUND"
                  message: "Member not found"
                  details: "No member exists with ID: 123e4567-e89b-12d3-a456-426614174000"
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponse'

  /members/stats:
    get:
      summary: Get member statistics
      description: |
        Retrieve aggregated statistics about the business community including member counts,
        geographic distribution, popular skills, and average business metrics.
        
        Insights include:
        - Total and active member count
        - Number of cities and degrees represented
        - Average annual turnover across members
        - Most common skills in the network
        - Geographic distribution of members
      tags:
        - Members
      responses:
        '200':
          description: Member statistics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MemberStatsResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiErrorResponse'

# ============================================================================
# Components
# ============================================================================
components:
  schemas:
    # ------------------------------------------------------------------------
    # System Schemas
    # ------------------------------------------------------------------------
    HealthResponse:
      type: object
      required:
        - status
        - timestamp
      properties:
        status:
          type: string
          enum: [ok]
          description: Health status
          example: "ok"
        timestamp:
          type: string
          format: date-time
          description: Current server timestamp
          example: "2025-10-21T10:30:00.000Z"

    # ------------------------------------------------------------------------
    # Bot/Message Schemas
    # ------------------------------------------------------------------------
    MessageRequest:
      type: object
      required:
        - message
      properties:
        message:
          type: string
          description: The message/question to send to the bot about community members or business services
          minLength: 1
          example: "Who are the top software development service providers in our community?"

    MessageResponse:
      type: object
      properties:
        response:
          type: string
          description: The bot's response about community members or business services
          example: "We have several top software development service providers in the community, including TechVision Solutions, Digital Innovations Pvt Ltd, and CodeCraft Technologies. They offer full-stack development, cloud solutions, and mobile app development services."

    ErrorResponse:
      type: object
      properties:
        error:
          type: string
          description: Error message
          example: "Message is required"

    # ------------------------------------------------------------------------
    # WhatsApp Schemas
    # ------------------------------------------------------------------------
    WhatsAppWebhookRequest:
      type: object
      required:
        - From
        - Body
      properties:
        From:
          type: string
          description: Sender's WhatsApp number in format 'whatsapp:+[country_code][number]'
          pattern: '^whatsapp:\+[1-9]\d{1,14}$'
          example: "whatsapp:+919876543210"
        Body:
          type: string
          description: Message text from the user about their business networking needs
          minLength: 1
          maxLength: 500
          example: "Find software developers in Chennai for a new project"
        ProfileName:
          type: string
          description: User's WhatsApp profile name
          example: "Rajesh Kumar"
        MessageSid:
          type: string
          description: Twilio message SID
          example: "SM1234567890abcdef"
        AccountSid:
          type: string
          description: Twilio account SID
          example: "AC1234567890abcdef"
        NumMedia:
          type: string
          description: Number of media files attached
          example: "0"
        MediaUrl0:
          type: string
          description: URL of first media attachment (if any)
          example: "https://api.twilio.com/media/ME1234"

    # ------------------------------------------------------------------------
    # Search Schemas
    # ------------------------------------------------------------------------
    NLSearchRequest:
      type: object
      required:
        - query
        - phoneNumber
      properties:
        query:
          type: string
          description: Natural language search query for finding business professionals
          minLength: 1
          maxLength: 500
          example: "Find members who offer consulting services in Chennai with software development skills"
        phoneNumber:
          type: string
          description: User's phone number for authentication as a community member
          pattern: '^\+?[1-9]\d{1,14}$'
          example: "+919876543210"
        context:
          type: object
          description: Conversation context (optional)
          properties:
            previousQuery:
              type: string
              example: "Show me software developers"
            previousResults:
              type: array
              items:
                type: string
              example: ["Arun Sharma", "Priya Menon"]
        options:
          type: object
          description: Search options
          properties:
            includeResponse:
              type: boolean
              default: true
              description: Include conversational response about business matches
            includeSuggestions:
              type: boolean
              default: true
              description: Include search suggestions for networking
            maxResults:
              type: integer
              minimum: 1
              maximum: 50
              default: 10
              description: Maximum number of member results to return

    NLSearchResponse:
      type: object
      required:
        - success
        - query
        - understanding
        - results
        - executionTime
      properties:
        success:
          type: boolean
          example: true
        query:
          type: string
          example: "Find members in Chennai"
        understanding:
          type: object
          description: How the system understood the business query
          properties:
            intent:
              type: string
              example: "find_member"
            entities:
              $ref: '#/components/schemas/ExtractedEntities'
            confidence:
              type: number
              format: float
              minimum: 0
              maximum: 1
              example: 0.87
            normalizedQuery:
              type: string
              example: "members offering consulting in Chennai with software development skills"
        results:
          type: object
          properties:
            members:
              type: array
              items:
                $ref: '#/components/schemas/MemberSearchResult'
            pagination:
              $ref: '#/components/schemas/PaginationInfo'
        response:
          type: object
          description: Natural language response about business matches (optional)
          properties:
            conversational:
              type: string
              example: "I found 5 members with consulting services in Chennai who have software development skills. Here are the top matches based on relevance and turnover..."
            suggestions:
              type: array
              items:
                type: string
              example:
                - "Refine by specific year of graduation"
                - "Filter by minimum annual turnover"
                - "Search for specific technical skills"
        executionTime:
          type: integer
          description: Query execution time in milliseconds
          example: 245

    SearchMembersRequest:
      type: object
      properties:
        query:
          type: string
          description: Search query text for finding members (optional)
          example: "software developer with cloud experience"
        searchType:
          type: string
          enum: [hybrid, semantic, keyword]
          default: hybrid
          description: Type of search to perform
        filters:
          $ref: '#/components/schemas/SearchFilters'
        page:
          type: integer
          minimum: 1
          default: 1
          example: 1
        limit:
          type: integer
          minimum: 1
          maximum: 50
          default: 10
          example: 10
        sortBy:
          type: string
          enum: [relevance, name, turnover, year]
          default: relevance
          example: relevance
        sortOrder:
          type: string
          enum: [asc, desc]
          default: desc
          example: desc

    SearchFilters:
      type: object
      description: Filters to apply to search for targeting specific member profiles
      properties:
        skills:
          type: array
          items:
            type: string
          example: ["Python", "JavaScript", "React"]
        services:
          type: array
          items:
            type: string
          example: ["Consulting", "Development"]
        city:
          type: string
          example: "Chennai"
        minTurnover:
          type: number
          minimum: 0
          description: Minimum annual business turnover in INR
          example: 5000000
        maxTurnover:
          type: number
          minimum: 0
          description: Maximum annual business turnover in INR
          example: 50000000
        yearOfGraduation:
          type: array
          items:
            type: integer
            minimum: 1950
            maximum: 2100
          example: [2015, 2016, 2017, 2018]
        degree:
          type: array
          items:
            type: string
          example: ["B.E.", "B.Tech", "M.Tech", "M.B.A."]

    SearchResponse:
      type: object
      required:
        - success
        - searchType
        - results
      properties:
        success:
          type: boolean
          example: true
        query:
          type: string
          example: "software developer"
        searchType:
          type: string
          enum: [hybrid, semantic, keyword]
          example: "hybrid"
        results:
          type: object
          properties:
            members:
              type: array
              items:
                $ref: '#/components/schemas/MemberSearchResult'
            pagination:
              $ref: '#/components/schemas/PaginationInfo'
            executionTime:
              type: integer
              description: Search execution time in milliseconds
              example: 156

    ExtractedEntities:
      type: object
      description: Entities extracted from natural language business query
      properties:
        skills:
          type: array
          items:
            type: string
          example: ["Python", "JavaScript", "React", "Node.js", "AWS"]
        location:
          type: string
          example: "Chennai"
        services:
          type: array
          items:
            type: string
          example: ["Software Development", "Consulting", "IT Services"]
        turnoverRequirement:
          type: string
          enum: [high, medium, low]
          example: "high"
        graduationYear:
          type: array
          items:
            type: integer
          example: [2015, 2016]
        degree:
          type: string
          example: "B.E."

    SuggestionsResponse:
      type: object
      required:
        - success
        - type
        - suggestions
      properties:
        success:
          type: boolean
          example: true
        type:
          type: string
          enum: [cities, skills, services]
          example: "skills"
        suggestions:
          type: array
          items:
            type: string
          example: ["Python", "JavaScript", "React", "Node.js", "Java", "Angular", "AWS", "Docker"]

    AllSuggestionsResponse:
      type: object
      required:
        - success
        - suggestions
      properties:
        success:
          type: boolean
          example: true
        suggestions:
          type: object
          properties:
            cities:
              type: array
              items:
                type: string
              example: ["Chennai", "Bangalore", "Mumbai", "Delhi", "Hyderabad", "Pune"]
            skills:
              type: array
              items:
                type: string
              example: ["Python", "JavaScript", "React", "Node.js", "Java", "AWS"]
            services:
              type: array
              items:
                type: string
              example: ["Software Development", "Consulting", "IT Services", "Training", "Cloud Solutions"]

    # ------------------------------------------------------------------------
    # Member Schemas
    # ------------------------------------------------------------------------
    Member:
      type: object
      required:
        - id
        - name
        - isActive
      properties:
        id:
          type: string
          format: uuid
          description: Unique member identifier
          example: "123e4567-e89b-12d3-a456-426614174000"
        name:
          type: string
          description: Member's full name
          example: "Rajesh Kumar"
        yearOfGraduation:
          type: integer
          nullable: true
          example: 2015
        degree:
          type: string
          nullable: true
          example: "B.E."
        branch:
          type: string
          nullable: true
          example: "Computer Science"
        workingAs:
          type: string
          nullable: true
          example: "Entrepreneur"
        organization:
          type: string
          nullable: true
          example: "TechVision Solutions Pvt Ltd"
        designation:
          type: string
          nullable: true
          example: "Founder & CEO"
        city:
          type: string
          nullable: true
          example: "Chennai"
        phone:
          type: string
          nullable: true
          example: "+919876543210"
        email:
          type: string
          format: email
          nullable: true
          example: "rajesh.kumar@techvision.com"
        skills:
          type: string
          nullable: true
          description: Comma-separated skills
          example: "Python, JavaScript, React, Node.js, AWS, Docker, Kubernetes"
        productsServices:
          type: string
          nullable: true
          description: Products and services offered
          example: "Software Development, Cloud Solutions, DevOps Consulting, IT Training"
        annualTurnover:
          type: number
          nullable: true
          description: Annual turnover in INR
          example: 15000000
        isActive:
          type: boolean
          description: Whether the member is active
          example: true
        createdAt:
          type: string
          format: date-time
          example: "2024-01-15T10:30:00.000Z"
        updatedAt:
          type: string
          format: date-time
          example: "2025-10-15T14:20:00.000Z"

    MemberSearchResult:
      type: object
      required:
        - id
        - name
        - relevanceScore
        - matchedFields
      properties:
        id:
          type: string
          format: uuid
          example: "123e4567-e89b-12d3-a456-426614174000"
        name:
          type: string
          example: "Rajesh Kumar"
        email:
          type: string
          example: "rajesh.kumar@techvision.com"
        phone:
          type: string
          example: "+919876543210"
        city:
          type: string
          example: "Chennai"
        organization:
          type: string
          example: "TechVision Solutions Pvt Ltd"
        designation:
          type: string
          example: "Founder & CEO"
        skills:
          type: string
          example: "Python, JavaScript, React"
        productsServices:
          type: string
          example: "Software Development, Cloud Consulting, DevOps"
        annualTurnover:
          type: number
          example: 12000000
        yearOfGraduation:
          type: integer
          example: 2015
        degree:
          type: string
          example: "B.E."
        branch:
          type: string
          example: "Computer Science"
        relevanceScore:
          type: number
          format: float
          description: Relevance score (0-1)
          example: 0.92
        matchedFields:
          type: array
          items:
            type: string
          description: Fields that matched the search
          example: ["skills", "city"]

    PaginationInfo:
      type: object
      required:
        - currentPage
        - totalPages
        - totalResults
        - resultsPerPage
        - hasNextPage
        - hasPreviousPage
      properties:
        currentPage:
          type: integer
          minimum: 1
          example: 1
        totalPages:
          type: integer
          minimum: 0
          example: 8
        totalResults:
          type: integer
          minimum: 0
          example: 78
        resultsPerPage:
          type: integer
          minimum: 1
          example: 10
        hasNextPage:
          type: boolean
          example: true
        hasPreviousPage:
          type: boolean
          example: false

    MemberStats:
      type: object
      required:
        - totalMembers
        - activeMembers
        - uniqueCities
        - uniqueDegrees
        - averageTurnover
        - topSkills
        - topCities
      properties:
        totalMembers:
          type: integer
          description: Total number of members
          example: 247
        activeMembers:
          type: integer
          description: Number of active members
          example: 238
        uniqueCities:
          type: integer
          description: Number of unique cities
          example: 42
        uniqueDegrees:
          type: integer
          description: Number of unique degrees
          example: 12
        averageTurnover:
          type: number
          format: float
          description: Average annual turnover
          example: 8750000
        topSkills:
          type: array
          items:
            type: object
            properties:
              skill:
                type: string
                example: "Python"
              count:
                type: integer
                example: 87
        topCities:
          type: array
          items:
            type: object
            properties:
              city:
                type: string
                example: "Chennai"
              count:
                type: integer
                example: 68

    MemberResponse:
      type: object
      required:
        - success
        - member
      properties:
        success:
          type: boolean
          example: true
        member:
          $ref: '#/components/schemas/Member'

    PaginatedMembersResponse:
      type: object
      required:
        - success
        - members
        - pagination
      properties:
        success:
          type: boolean
          example: true
        members:
          type: array
          items:
            $ref: '#/components/schemas/Member'
        pagination:
          $ref: '#/components/schemas/PaginationInfo'

    MemberStatsResponse:
      type: object
      required:
        - success
        - stats
      properties:
        success:
          type: boolean
          example: true
        stats:
          $ref: '#/components/schemas/MemberStats'

    # ------------------------------------------------------------------------
    # Error Schemas
    # ------------------------------------------------------------------------
    ApiError:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          description: Error code
          example: "INVALID_PARAMETERS"
        message:
          type: string
          description: Human-readable error message
          example: "Invalid search parameters"
        details:
          description: Additional error details
          oneOf:
            - type: string
            - type: object
            - type: array
          example:
            page: "Page must be a positive integer"

    ApiErrorResponse:
      type: object
      required:
        - success
        - error
      properties:
        success:
          type: boolean
          example: false
        error:
          $ref: '#/components/schemas/ApiError'

  # --------------------------------------------------------------------------
  # Security Schemes (for future use)
  # --------------------------------------------------------------------------
  securitySchemes:
    phoneAuth:
      type: apiKey
      in: header
      name: X-Phone-Number
      description: Phone number authentication for natural language search

tags:
  - name: System
    description: System health and status endpoints
  - name: Bot
    description: LLM-powered bot for business community queries and member discovery
  - name: Search
    description: Natural language and structured search for finding business professionals and networking opportunities
  - name: Members
    description: Member directory, business profiles, and community statistics
  - name: WhatsApp
    description: WhatsApp business messaging integration via Twilio webhook for on-the-go member search
